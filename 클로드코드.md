## 판정: **예(Go)** — Claude Code + Ollama 설치/연동 “상세 가이드”

## 근거: Claude Code 설치 스크립트/윈도우 설치 방법과 시스템 요구사항이 공식 문서에 있고, Ollama는 Claude Code 통합(Anthropic-compatible API/`ollama launch`)을 공식 문서로 제공함. ([code.claude.com][1])

## 다음행동: **1) Ollama 설치 → 2) 모델 pull → 3) Claude Code 설치 → 4) `ollama launch`로 연결 → 5) (선택) Cursor/OpenClaw 큐 워커 붙이기** 순서로 진행

---

# 0) 준비물 체크(공통)

* OS: macOS 13+ / Windows 10 1809+ / Ubuntu 20.04+ 등(공식 요구사항) ([code.claude.com][2])
* RAM: 4GB+ (권장 그 이상) ([code.claude.com][2])
* 네트워크: Claude Code 설치/로그인에 필요(공식 요구사항에 명시) ([code.claude.com][2])

---

# 1) Ollama 설치 (OS별)

## A) Windows

1. Ollama 앱 설치(공식 Quickstart에서 Download 안내) ([Ollama Documentation][3])
2. 설치 후 PowerShell/CMD에서 확인:

```bash
ollama --version
```

## B) macOS / Linux

1. Ollama 설치(공식 Quickstart에서 Download 안내) ([Ollama Documentation][3])
2. 확인:

```bash
ollama --version
```

---

# 2) 모델 다운로드(pull)

예시(코딩용):

```bash
ollama pull qwen3-coder
# 또는
ollama pull glm-4.7
```

(Claude Code 통합 문서에 “오픈 모델” 사용 예시가 직접 나옵니다.) ([Ollama Documentation][4])

---

# 3) Claude Code 설치 (공식 설치 커맨드)

## A) macOS / Linux / WSL

```bash
curl -fsSL https://claude.ai/install.sh | bash
```

([code.claude.com][1])

## B) Windows PowerShell

```powershell
irm https://claude.ai/install.ps1 | iex
```

([code.claude.com][1])

설치 확인:

```bash
claude --version
```

---

# 4) Claude Code ↔ Ollama 연동(가장 안전/간단: `ollama launch`)

Ollama CLI는 “외부 앱을 Ollama 모델로 연결”하는 `ollama launch`를 공식 제공하고, 지원 목록에 **Claude Code**가 포함됩니다. ([Ollama Documentation][5])

## 실행

```bash
ollama launch
```

* 실행 후 **Claude Code** 선택
* 사용할 모델 선택(예: `qwen3-coder`, `glm-4.7` 등)
* 안내에 따라 Claude Code를 그 설정으로 실행

> 포인트: 이 루트는 **환경변수/설정파일을 손으로 만지지 않게** 만들어 실수율이 낮습니다. ([Ollama Documentation][5])

---

# 5) 동작 검증(최소 테스트)

1. Claude Code를 프로젝트 루트에서 실행:

```bash
cd /path/to/your/repo
claude
```

2. Claude Code에 간단 지시:

* “README 한 줄만 바꿔서 patch 제안해줘(적용은 하지 말고 diff만)”
* “tests/ 실행 명령은 제안만”

3. 기대 결과:

* Claude Code가 **로컬 모델(Ollama)** 기반으로 응답/제안
* 당신 정책대로라면 **적용은 Cursor에서만** 수행

---

# 6) (선택) Cursor + OpenClaw + Queue 스캐폴딩에 붙이는 법(운영 규칙)

아래 2가지만 지키면 충돌이 없습니다.

## 규칙 1) Claude Code는 “티켓 생성/요구사항 정리(UX)”까지만

* 출력: `task.json` (목표/allowlist/성공조건/금지사항)
* 저장: `.autodev_queue/inbox/` 투입

## 규칙 2) 적용/테스트/커밋/머지는 Cursor(Control-Plane)만

* OpenClaw/Worker는 **unified diff**만 산출
* Gate 통과 후 Cursor가 `git apply` + test + commit

---

# 7) 트러블슈팅(현장에서 많이 걸리는 것만)

## (1) Claude Code 설치는 됐는데 실행이 안 됨

* OS/셸/네트워크 요구사항 재확인(공식 Setup) ([code.claude.com][2])
* `claude --version` / `which claude`(mac/linux) 확인

## (2) Ollama는 되는데 Claude Code가 로컬 모델을 안 씀

* `ollama launch`로 다시 연결(Claude Code 지원 통합 목록 포함) ([Ollama Documentation][5])
* 모델이 pull 되었는지 `ollama list` 확인

## (3) GPU 관련

* Docker/Compose로 Ollama를 돌리면 GPU 설정은 Docker Compose GPU 가이드 준수 ([Docker Documentation][6])
* (단, 로컬 앱 Ollama는 별개 경로)

```md
# 클로드코드.md — Windows(olla) 기준 Claude Code + Ollama 설치·연동 가이드

## 판정/범위
- **판정:** Go
- **범위:** Windows에서 **Ollama(로컬 LLM)** + **Claude Code(터미널 코딩 에이전트)** 설치 후, **`ollama launch`로 연동**까지.
- **원칙:** 환경변수 수동 설정은 **최후수단**. 기본은 **`ollama launch`** 사용.

---

## 0) 사전 준비(Windows)
### 필수
1) **PowerShell** 실행 가능  
2) 설치 확인용 커맨드가 동작해야 함(아래 1~4 절차에서 확인)

### 권장
- GPU 사용 시: NVIDIA 드라이버/환경 정상(선택)

---

## 1) Ollama 설치(Windows)
1) **Ollama 설치 파일을 내려받아 설치**  
   - Ollama는 Windows에서 공식 제공됨. :contentReference[oaicite:0]{index=0}  
2) 설치 확인:
```powershell
ollama --version
```

---

## 2) 모델 pull (로컬 다운로드)

Claude Code 연동 예시로 Ollama 문서에서 언급되는 모델 예:

* `glm-4.7`
* `qwen3-coder`
  (원하는 모델 1개만 먼저 받으면 됨) ([Ollama Documentation](https://docs.ollama.com/integrations/claude-code?utm_source=chatgpt.com "Claude Code"))

예시:

```powershell
ollama pull qwen3-coder
# 또는
ollama pull glm-4.7
```

설치 확인:

```powershell
ollama list
```

---

## 3) Claude Code 설치(Windows PowerShell)

Claude Code 공식 설치(Windows PowerShell): ([code.claude.com](https://code.claude.com/docs/en/setup?utm_source=chatgpt.com "Set up Claude Code - Claude Code Docs"))

```powershell
irm https://claude.ai/install.ps1 | iex
```

설치 확인:

```powershell
claude --version
```

---

## 4) 연동(가장 간단/권장): `ollama launch`

Ollama CLI는 **외부 코딩 도구(Claude Code 포함)를 Ollama 모델로 연결**하는 `ollama launch`를 공식 제공. ([Ollama Documentation](https://docs.ollama.com/cli?utm_source=chatgpt.com "CLI Reference - Ollama"))

1. 실행:

```powershell
ollama launch
```

2. 메뉴에서:

* **Claude Code** 선택
* 사용할 모델 선택(예: `qwen3-coder` 또는 `glm-4.7`)
* 안내대로 실행

> 참고: `ollama launch`는 “환경변수/설정파일 없이” 연결을 목표로 하는 신규 커맨드로 소개됨. ([ollama.com](https://ollama.com/blog/launch?utm_source=chatgpt.com "ollama launch · Ollama Blog"))

---

## 5) 동작 검증(최소 테스트)

1. 프로젝트 폴더로 이동:

```powershell
cd C:\path\to\your\repo
```

2. Claude Code 실행:

```powershell
claude
```

3. Claude Code 프롬프트(예시)

* “README 한 줄만 바꾸는 **diff**만 제안해줘. 적용/커밋은 하지 마.”
* “테스트 명령은 제안만 하고 실행은 하지 마.”

**기대 결과**

* 로컬 모델 기반으로 변경 제안 생성
* 당신 운영 원칙대로면: **적용은 Cursor(Control-Plane)에서만**

---

## 6) Cursor / OpenClaw / Queue와 역할 고정(운영 규칙)

| 역할                  | 담당                      | 산출물                                   | 금지                    |
| --------------------- | ------------------------- | ---------------------------------------- | ----------------------- |
| Claude Code           | 요구사항 정리 + task 작성 | `task.json`→`.autodev_queue/inbox/` | 직접 apply/commit/merge |
| OpenClaw Worker       | diff 제안만               | unified diff(.patch)                     | apply/commit/merge      |
| Cursor(Control-Plane) | 적용/테스트/커밋/PR/머지  | Gate 통과 후 `git apply`               | Worker 역할             |

---

## 7) 트러블슈팅(빈출)

### (1) `ollama` 커맨드가 안 잡힘

* Ollama 설치 재확인(Windows 앱 설치 후 터미널 재시작 권장). ([Ollama Documentation](https://docs.ollama.com/quickstart?utm_source=chatgpt.com "Ollama Quickstart"))

### (2) `ollama launch`에 Claude Code가 안 보임

* Ollama 버전 업데이트 후 재시도
* `ollama launch`는 통합 목록을 내장(Claude Code 포함). ([Ollama Documentation](https://docs.ollama.com/cli?utm_source=chatgpt.com "CLI Reference - Ollama"))

### (3) Claude Code 설치는 됐는데 실행 오류

* 공식 Setup/설치 방식으로 재설치(특히 PowerShell 설치 커맨드). ([code.claude.com](https://code.claude.com/docs/en/setup?utm_source=chatgpt.com "Set up Claude Code - Claude Code Docs"))

---

## (부록) Windows “10줄 실행 커맨드 팩”

```powershell
ollama --version
ollama pull qwen3-coder
ollama list
irm https://claude.ai/install.ps1 | iex
claude --version
ollama launch
cd C:\path\to\your\repo
claude
# Claude Code 프롬프트: "README 한 줄만 바꾸는 diff만 제안해줘. 적용/커밋 금지."
# Cursor에서 Gate 후 git apply + test + commit
```

```
::contentReference[oaicite:8]{index=8}
```






---

원하면, 지금 네 환경(Windows/WSL 여부, Ollama 로컬앱 vs Docker 중 무엇인지)에 맞춰 **“딱 10줄짜리 실행 커맨드 팩”**으로 줄여서 배포용(runbook) 형태로 다시 뽑아준다.

[1]: https://code.claude.com/docs/en/quickstart?utm_source=chatgpt.com
[2]: https://code.claude.com/docs/en/setup?utm_source=chatgpt.com
[3]: https://docs.ollama.com/quickstart?utm_source=chatgpt.com
[4]: https://docs.ollama.com/integrations/claude-code?utm_source=chatgpt.com
[5]: https://docs.ollama.com/cli?utm_source=chatgpt.com
[6]: https://docs.docker.com/compose/how-tos/gpu-support/?utm_source=chatgpt.com
